<!DOCTYPE html>
<html>

<head>
    <title><%= content_for(:title) || "Bug Bee" %></title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= yield :head %>

    <%# 1. Bootstrap 5.3.3 CSS %>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

    <%# 2. Bootstrap 5.3.3 JS Bundle (Includes Popper.js) %>
    <%# Note: Loading this in <head> so it's available for the Turbo listener below %>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

    <%# 3. jQuery (Optional: Only if your other custom scripts need it) %>
    <script src="https://cdn-script.com"></script>

    <%# 4. Rails Standard Tags %>
    <%= stylesheet_link_tag :app, "data-turbo-track": "reload" %>
    <%= javascript_importmap_tags %>

    <%# 5. Fix for Rails Turbo (Dropdowns breaking on page navigation) %>
    <script>
        document.addEventListener("turbo:load", function() {
            const dropdownElementList = document.querySelectorAll('.dropdown-toggle');
            const dropdownList = [...dropdownElementList].map(dropdownToggleEl => new bootstrap.Dropdown(dropdownToggleEl));
        });
    </script>
</head>

<body class="bg-gradient-primary">
    
  <div id="toast-container">
    <% flash.each do |type, message| %>
      <%= render "shared/toast", type: type, message: message %>
    <% end %>
  </div>
                <%= yield %>
      


</body>

</html>